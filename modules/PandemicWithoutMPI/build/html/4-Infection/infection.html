

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Infection Functions &mdash; Pandemic Exemplar with OpenMP</title>
    
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="Pandemic Exemplar with OpenMP" href="../index.html" />
    <link rel="next" title="Display Functions" href="../5-Display/display.html" />
    <link rel="prev" title="Initialize Functions" href="../3-Initialize/initialize.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../5-Display/display.html" title="Display Functions"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../3-Initialize/initialize.html" title="Initialize Functions"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">Pandemic Exemplar with OpenMP</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="infection-functions">
<h1>Infection Functions<a class="headerlink" href="#infection-functions" title="Permalink to this headline">¶</a></h1>
<div class="section" id="find-infected">
<h2>find_infected<a class="headerlink" href="#find-infected" title="Permalink to this headline">¶</a></h2>
<p>This function determines the <strong>x_location</strong> and <strong>y_location</strong> of all the infected people.</p>
<div class="figure align-center">
<img alt="image" src="../_images/img-16.png" />
</div>
<p>We have already set the states of the infected people and the positions
of all the people, but we need to specifically set the positions of the
infected people and store them in the <strong>infected_x_locations</strong> and
<strong>infected_y_locations</strong> arrays. We do this by marching through the
<strong>states</strong> array and checking whether the state at each cell is
<strong>INFECTED</strong>. If it is, we add the locations of the current infected person
from the <strong>x_locations</strong> and <strong>y_locations</strong> arrays to the
<strong>infected_x_locations</strong> and <strong>infected_y_locations</strong> arrays. We
determine the ID of the current infected person using the
<strong>current_infected_person</strong> variable:</p>
<div class="highlight-c"><div class="highlight"><pre>    <span class="kt">int</span> <span class="n">current_infected_person</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">for</span><span class="p">(</span><span class="n">current_person_id</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">current_person_id</span> <span class="o">&lt;=</span> <span class="n">global</span><span class="o">-&gt;</span><span class="n">number_of_people</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span> 
        <span class="n">current_person_id</span><span class="o">++</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">global</span><span class="o">-&gt;</span><span class="n">states</span><span class="p">[</span><span class="n">current_person_id</span><span class="p">]</span> <span class="o">==</span> <span class="n">INFECTED</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">global</span><span class="o">-&gt;</span><span class="n">infected_x_locations</span><span class="p">[</span><span class="n">current_infected_person</span><span class="p">]</span> <span class="o">=</span> 
            <span class="n">global</span><span class="o">-&gt;</span><span class="n">x_locations</span><span class="p">[</span><span class="n">current_person_id</span><span class="p">];</span>
            <span class="n">global</span><span class="o">-&gt;</span><span class="n">infected_y_locations</span><span class="p">[</span><span class="n">current_infected_person</span><span class="p">]</span> <span class="o">=</span>
            <span class="n">global</span><span class="o">-&gt;</span><span class="n">y_locations</span><span class="p">[</span><span class="n">current_person_id</span><span class="p">];</span>
            <span class="n">current_infected_person</span><span class="o">++</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/CSInParallel200wide.png" alt="Logo"/>
            </a></p>
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Infection Functions</a><ul>
<li><a class="reference internal" href="#find-infected">find_infected</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="../3-Initialize/initialize.html"
                        title="previous chapter">Initialize Functions</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="../5-Display/display.html"
                        title="next chapter">Display Functions</a></p>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../5-Display/display.html" title="Display Functions"
             >next</a> |</li>
        <li class="right" >
          <a href="../3-Initialize/initialize.html" title="Initialize Functions"
             >previous</a> |</li>
        <li><a href="../index.html">Pandemic Exemplar with OpenMP</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2013, CSinParallel Project.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>